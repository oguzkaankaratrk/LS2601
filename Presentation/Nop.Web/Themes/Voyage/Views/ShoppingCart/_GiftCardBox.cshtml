@model ShoppingCartModel.GiftCardBoxModel
@if (Model.Display)
{
    <div class="giftcard-box ls-giftcard">
        <button type="button"
                class="ls-giftcard-toggle"
                aria-expanded="false"
                aria-controls="ls-giftcard-panel">
            <span class="ls-giftcard-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gift" viewBox="0 0 16 16">
                    <path d="M3 2.5a2.5 2.5 0 0 1 5 0 2.5 2.5 0 0 1 5 0v.006c0 .07 0 .27-.038.494H15a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1v7.5a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 1 14.5V7a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h2.038A3 3 0 0 1 3 2.506zm1.068.5H7v-.5a1.5 1.5 0 1 0-3 0c0 .085.002.274.045.43zM9 3h2.932l.023-.07c.043-.156.045-.345.045-.43a1.5 1.5 0 0 0-3 0zM1 4v2h6V4zm8 0v2h6V4zm5 3H9v8h4.5a.5.5 0 0 0 .5-.5zm-7 8V7H2v7.5a.5.5 0 0 0 .5.5z" />
                </svg>
            </span>

            <span class="ls-giftcard-text">
                @T("ShoppingCart.GiftCardCouponCode")
            </span>
        </button>

        <div class="content ls-giftcard-panel" id="ls-giftcard-panel" hidden>
            <div class="hint">
                @T("ShoppingCart.GiftCardCouponCode.Tooltip")
            </div>
            <div class="coupon-code">
                <input name="giftcardcouponcode" 
                    id="giftcardcouponcode" 
                    type="text" 
                    class="gift-card-coupon-code"
                       placeholder="@T("ShoppingCart.GiftCardCouponCode.Label")"
                    aria-label="@T("ShoppingCart.GiftCardCouponCode.Label")" />

                <button type="submit" 
                    name="applygiftcardcouponcode" 
                    id="applygiftcardcouponcode" 
                    class="button-2 apply-gift-card-coupon-code-button">
                    @T("ShoppingCart.GiftCardCouponCode.Button")
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8" />
                    </svg>
                    </button>
            </div>
            @if (!string.IsNullOrEmpty(Model.Message))
            {
                <div class="@(Model.IsApplied ? "message-success" : "message-failure")">
                    @Model.Message
                </div>
            }
        </div>
    </div>
@*     <script asp-location="Footer">
        $(function() {
            $('#giftcardcouponcode').on('keydown', function (event) {
                if (event.keyCode == 13) {
                    $('#applygiftcardcouponcode').trigger("click");
                    return false;
                }
            });
        });
    </script> *@
    <script asp-location="Footer">
        $(function () {

            // Toggle (Gift card panel aç/kapa)
            $('.ls-giftcard-toggle').on('click', function () {
                var $btn = $(this);
                var panelId = $btn.attr('aria-controls');
                var $panel = $('#' + panelId);

                var isOpen = $btn.attr('aria-expanded') === 'true';

                $btn.attr('aria-expanded', (!isOpen).toString());

                if (isOpen) {
                    $panel.attr('hidden', true);
                } else {
                    $panel.removeAttr('hidden');
                    $panel.find('input, textarea, select').first().trigger('focus');
                }
            });

            // Enter ile apply zaten var (senin kodun)
            $('#giftcardcouponcode').on('keydown', function (event) {
                if (event.keyCode == 13) {
                    $('#applygiftcardcouponcode').trigger("click");
                    return false;
                }
            });
        });
    </script>

}